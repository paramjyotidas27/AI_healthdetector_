<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Health Questionnaire</title>
<style>
body{
  font-family:"Segoe UI",sans-serif;
  background:#f4f9ff;
  color:#222;
  margin:0;padding:0;
}
h1{
  text-align:center;
  color:#0066cc;
  margin-top:25px;
}
form{
  background:white;
  max-width:780px;
  margin:30px auto;
  padding:25px 35px;
  border-radius:15px;
  box-shadow:0 4px 20px rgba(0,0,0,0.1);
}
label{font-weight:600;display:block;margin:15px 0 5px;}
input[type="number"],select{
  width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;
}
button{
  display:block;margin:25px auto;background:#0074cc;color:white;border:none;
  border-radius:8px;padding:10px 22px;font-size:16px;cursor:pointer;
}
button:hover{background:#005fa3;}
hr{margin:25px 0;}

/* modals */
.modal{
  display:none;position:fixed;z-index:999;left:0;top:0;width:100%;height:100%;
  background:rgba(0,0,0,0.5);
}
.modal-content{
  background:#fff;
  border-radius:12px;
  max-width:700px;
  margin:50px auto;
  padding:20px 30px;
  position:relative;
  animation:fadeIn .4s;
  max-height:85vh;
  overflow-y:auto;
}
@keyframes fadeIn{from{opacity:0;transform:translateY(-20px);}to{opacity:1;transform:translateY(0);}}
.close{position:absolute;top:10px;right:20px;font-size:22px;cursor:pointer;color:#444;}
.close:hover{color:red;}
.disease{margin:15px 0 25px;border-bottom:1px solid #ddd;padding-bottom:10px;}
.danger{color:red;font-weight:bold;}
.final-review{background:#f5faff;border-left:6px solid #0074cc;padding:15px 20px;
  border-radius:10px;margin-top:20px;font-size:15px;}
.star{font-size:25px;cursor:pointer;color:#ccc;}
.star.selected{color:gold;}
</style>
</head>
<body>

<h1>AI Health Questionnaire</h1>
<form id="healthForm">
  <label>Enter your Age (years):</label>
  <input type="number" id="age" min="1" max="120" required>

  <label>Gender:</label>
  <select id="gender" required>
    <option value="">Select</option>
    <option>Male</option>
    <option>Female</option>
    <option>Other</option>
  </select>

  <label>Height (in meters):</label>
  <input type="number" id="height" step="0.01" min="0.5" max="2.5" required>

  <label>Weight (in kg):</label>
  <input type="number" id="weight" min="20" max="200" required>

  <hr>
  <p><b>Answer the following 20 questions:</b></p>
  <div id="questions"></div>
  <button type="button" onclick="calculate()">Get AI Review</button>
</form>

<!-- result modal -->
<div id="resultModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <div id="result"></div>
  </div>
</div>

<!-- review modal -->
<div id="reviewModal" class="modal">
  <div class="modal-content" style="background:#eef6ff;">
    <span class="close" onclick="closeReview()">&times;</span>
    <h2 style="color:#0074cc;">Rate Your Experience</h2>
    <div id="stars">
      <span class="star" onclick="rate(1)">★</span>
      <span class="star" onclick="rate(2)">★</span>
      <span class="star" onclick="rate(3)">★</span>
      <span class="star" onclick="rate(4)">★</span>
      <span class="star" onclick="rate(5)">★</span>
    </div>
    <label style="margin-top:10px;">Any Suggestions?</label>
    <textarea id="suggestion" rows="4" style="width:100%;border-radius:8px;padding:10px;"></textarea>
    <button onclick="submitReview()">Submit Review</button>
    <p id="thankyou" style="display:none;color:#0074cc;font-weight:600;">Thank you for your feedback!</p>
  </div>
</div>

<script>
const qset=[
  "Do you often feel tired or fatigued?",
  "Do you experience dizziness or pale skin?",
  "Do you feel excessive thirst or frequent urination?",
  "Have you had sudden weight loss or gain?",
  "Do you have persistent cough or chest pain?",
  "Do you frequently suffer fever or chills?",
  "Do you experience joint or muscle pain?",
  "Any rashes or red spots on the skin?",
  "Do you sweat excessively at night?",
  "Do you get short of breath easily?",
  "Loss of appetite or nausea?",
  "Do you have irregular sleep patterns?",
  "Brittle nails or pale lips?",
  "Recent travel to mosquito areas?",
  "Headache with eye pain?",
  "Cough lasting more than two weeks?",
  "Do you feel body aches or weakness?",
  "High stress levels or poor diet?",
  "Any swelling in legs or ankles?",
  "Do you find difficulty focusing or remembering?"
];
const qDiv=document.getElementById("questions");
qset.forEach((q,i)=>{
  qDiv.innerHTML+=`<label>${i+1}. ${q}</label><select><option>No</option><option>Yes</option></select>`;
});

function calculate(){
  const age=parseInt(ageEl.value),h=parseFloat(heightEl.value),w=parseFloat(weightEl.value);
  const g=genderEl.value;
  if(!age||!h||!w||!g){alert("Please fill all fields properly.");return;}

  // BMI calculation fix
  const bmi=(w/(h*h)).toFixed(1);
  let bmiStatus="Normal";
  if(bmi<18.5)bmiStatus="Underweight";
  else if(bmi>=25 && bmi<30)bmiStatus="Overweight";
  else if(bmi>=30)bmiStatus="Obese";

  const selects=document.querySelectorAll("#questions select");
  const yesIndex=[];selects.forEach((s,i)=>{if(s.value==="Yes")yesIndex.push(i);});

  // disease mapping
  const map={
    Anaemia:[0,1,12],
    Diabetes:[2,3,17],
    Dengue:[5,7,13,14],
    Chikungunya:[5,6,7,16],
    Tuberculosis:[4,5,8,15]
  };
  
  const aiReco={
    Anaemia:"Your symptoms suggest possible low haemoglobin. Iron-rich diet and supplements can help improve blood quality.",
    Diabetes:"Maintain a balanced diet with low sugar, regular exercise, and stress control. Monitor your sugar levels regularly.",
    Dengue:"Rest well and stay hydrated. Avoid mosquito bites and monitor your platelet count if fever persists.",
    Chikungunya:"Hydration and rest are key. Use mild pain relief and warm compress for joints.",
    Tuberculosis:"Long cough or fever needs medical attention. Early diagnosis ensures full recovery with proper antibiotics."
  };

  const remedies={
    Anaemia:"Eat spinach, dates, jaggery, apple, pomegranate juice.",
    Diabetes:"Drink fenugreek (methi) water, take karela juice, control carbs.",
    Dengue:"Drink papaya leaf extract, coconut water, and plenty of fluids.",
    Chikungunya:"Have turmeric milk, tulsi water, and warm baths for joint pain.",
    Tuberculosis:"Have garlic, ginger, black pepper, and eat nutrient-rich foods."
  };

  const meds={
    Anaemia:"Iron and folic acid tablets (under guidance), Vitamin B12 supplements.",
    Diabetes:"Metformin (only under medical advice), or herbal D-care capsules.",
    Dengue:"Paracetamol for fever, ORS and fluids (avoid aspirin).",
    Chikungunya:"Paracetamol for fever, anti-inflammatory balm or mild painkillers.",
    Tuberculosis:"Requires prescribed antibiotics — do not self-medicate."
  };

  let resultHTML=`<h2>AI Health Review</h2><p>Age: ${age} yrs, Gender: ${g}, BMI: ${bmi} (${bmiStatus})</p>`;
  
  for(let d in map){
    const relevant=map[d];
    let count=0;
    relevant.forEach(i=>{if(yesIndex.includes(i))count++;});
    let percent=Math.min((count/relevant.length)*85,85).toFixed(1);
    let remark="Good health detected. Stay consistent with your lifestyle.";
    if(percent>65)remark="High risk detected — immediate consultation recommended.";
    else if(percent>40)remark="Moderate signs observed — monitor and take precautions.";

    resultHTML+=`<div class="disease"><b>${d}</b>: ${percent}%<br>
      <i>${remark}</i><br><b>AI Recommendation:</b> ${aiReco[d]}<br>
      <b>Home Remedy:</b> ${remedies[d]}<br>
      <b>Medicines:</b> ${meds[d]}
      ${percent>67?'<p class="danger">⚠️ Seek immediate doctor consultation.</p>':''}</div>`;
  }

  resultHTML+=`<div class="final-review">⚕️ This AI tool provides an early health estimate based on common symptoms. It is not a replacement for a professional medical diagnosis.</div>`;
  document.getElementById("result").innerHTML=resultHTML;
  document.getElementById("resultModal").style.display="block";
}

function closeModal(){
  document.getElementById("resultModal").style.display="none";
  document.getElementById("reviewModal").style.display="block";
}
function closeReview(){document.getElementById("reviewModal").style.display="none";}

let currentRating=0;
function rate(n){
  currentRating=n;
  document.querySelectorAll(".star").forEach((s,i)=>{
    s.classList.toggle("selected",i<n);
  });
}
function submitReview(){
  if(currentRating===0){alert("Please give a rating.");return;}
  document.getElementById("thankyou").style.display="block";
  setTimeout(()=>{closeReview();},1500);
}

const ageEl=document.getElementById("age"),
      heightEl=document.getElementById("height"),
      weightEl=document.getElementById("weight"),
      genderEl=document.getElementById("gender");
</script>

</body>
</html>
